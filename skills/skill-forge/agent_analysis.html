<div class="bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg shadow-lg p-6 mb-6">
  <h2 class="text-2xl font-bold text-purple-800 mb-4 border-b-2 border-purple-300 pb-2">
    🎯 深度解析:Agent类型与复杂任务处理
  </h2>

  <!-- 为什么做错了 -->
  <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 rounded-r-lg">
    <h3 class="text-lg font-semibold text-yellow-800 mb-2 flex items-center">
      <span class="mr-2">💡</span>为什么你选错了?
    </h3>
    <div class="text-gray-700 leading-relaxed space-y-2">
      <p>你选择了 <strong>Reflex Agent(反射型Agent)</strong>,这是一个非常常见的误区!</p>
      <p class="bg-white p-3 rounded border-l-2 border-yellow-300">
        <strong>核心误解:</strong>你可能认为"快速反应"就等于"能处理复杂任务"。但实际上,Reflex Agent 只能做 <em>"条件-动作"</em> 式的简单映射,就像:
        <code class="bg-gray-100 px-2 py-1 rounded text-sm">如果(看到红灯) → 停车</code>
      </p>
      <p>对于<strong>多步骤复杂任务</strong>(比如"规划一次旅行"),Reflex Agent 完全无能为力,因为它:</p>
      <ul class="list-disc list-inside ml-4 space-y-1">
        <li>❌ 没有长期记忆和规划能力</li>
        <li>❌ 无法预测未来状态</li>
        <li>❌ 不能分解和管理子任务</li>
        <li>❌ 只能"被动响应",不能"主动思考"</li>
      </ul>
    </div>
  </div>

  <!-- 核心考点 -->
  <div class="bg-white rounded-lg shadow-md p-5 mb-6 border-t-4 border-purple-500">
    <h3 class="text-xl font-semibold text-purple-700 mb-3 flex items-center">
      <span class="mr-2">📚</span>核心考点
    </h3>
    <div class="text-gray-700 space-y-3">
      <p class="leading-relaxed">
        本题考察的是 <strong class="text-purple-600">Agent架构的智能层级</strong> 和 <strong class="text-purple-600">复杂任务的规划机制</strong>。
      </p>
      <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
        <p class="font-medium text-purple-800 mb-2">Agent智能层级金字塔:</p>
        <pre class="text-sm text-gray-700 leading-relaxed">
🏆 Goal-based Agent      ← 最高智能:有目标、会规划、能推理
   ↑
📊 Model-based Agent     ← 中等智能:有内部状态模型、能追踪环境
   ↑
⚡ Reflex Agent          ← 基础智能:条件反射式响应
   ↑
🤖 Simple Response       ← 最低智能:固定映射表
        </pre>
      </div>
      <p class="text-sm text-gray-600 italic">
        关键洞察:<strong>多步骤任务</strong>需要<strong>目标分解</strong>、<strong>序列规划</strong>、<strong>状态追踪</strong>,只有 Goal-based Agent 具备完整能力。
      </p>
    </div>
  </div>

  <!-- 逻辑推导 -->
  <div class="bg-white rounded-lg shadow-md p-5 mb-6 border-t-4 border-blue-500">
    <h3 class="text-xl font-semibold text-blue-700 mb-3 flex items-center">
      <span class="mr-2">🔍</span>逻辑推导
    </h3>

    <div class="space-y-4">
      <!-- 正确答案 -->
      <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
        <h4 class="font-bold text-green-800 mb-2">✅ C. Goal-based Agent(正确)</h4>
        <p class="text-gray-700 mb-3"><strong>为什么正确?</strong></p>
        <ul class="list-disc list-inside space-y-2 text-gray-700 ml-2">
          <li><strong>目标驱动</strong>:能将"订一次旅行"分解为子目标(订机票 → 订酒店 → 规划路线)</li>
          <li><strong>搜索与规划</strong>:在多种方案中搜索最优路径(比较价格、时间、舒适度)</li>
          <li><strong>状态推理</strong>:预测每个动作的后果("如果选这个航班,能赶上check-in吗?")</li>
          <li><strong>灵活调整</strong>:当某个子任务失败时,能重新规划替代方案</li>
        </ul>
        <div class="mt-3 bg-white p-3 rounded border border-green-300">
          <p class="text-sm text-gray-600">
            <strong>类比:</strong>就像国际象棋大师,会提前思考多步棋,预测对手反应,最终实现"将军"的目标。
          </p>
        </div>
      </div>

      <!-- 错误选项 -->
      <div class="space-y-3">
        <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-400">
          <h4 class="font-bold text-red-800 mb-2">❌ A. Reflex Agent(你的错误选择)</h4>
          <p class="text-gray-700">
            <strong>为什么错?</strong>只能做 <code class="bg-gray-100 px-2 py-1 rounded text-sm">if-then</code> 映射,无规划能力。
          </p>
          <p class="text-sm text-gray-600 mt-2">
            例如:温控器(感知温度 → 开关空调),无法处理"多步骤旅行预订"这种需要全局规划的任务。
          </p>
        </div>

        <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-400">
          <h4 class="font-bold text-red-800 mb-2">❌ B. Model-based Agent</h4>
          <p class="text-gray-700">
            <strong>为什么错?</strong>虽然有内部状态模型,但<strong>缺乏目标规划</strong>机制。
          </p>
          <p class="text-sm text-gray-600 mt-2">
            例如:扫地机器人(记住已清扫区域),能追踪状态但不会"规划最优清扫路线"。
          </p>
        </div>

        <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-400">
          <h4 class="font-bold text-red-800 mb-2">❌ D. Simple Response Agent</h4>
          <p class="text-gray-700">
            <strong>为什么错?</strong>最原始的Agent,只有固定映射表,连感知都谈不上。
          </p>
          <p class="text-sm text-gray-600 mt-2">
            例如:自动门(感应到人 → 开门),完全无智能可言。
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- 举一反三 -->
  <div class="bg-white rounded-lg shadow-md p-5 mb-6 border-t-4 border-indigo-500">
    <h3 class="text-xl font-semibold text-indigo-700 mb-3 flex items-center">
      <span class="mr-2">💻</span>举一反三:代码示例
    </h3>

    <p class="text-gray-700 mb-3">假设我们要构建一个"自动化测试Agent"来处理复杂测试流程:</p>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Reflex Agent 实现 -->
      <div class="bg-red-50 p-4 rounded-lg border border-red-200">
        <h4 class="font-semibold text-red-700 mb-2">❌ Reflex Agent(失败)</h4>
        <pre><code class="language-python text-xs">class ReflexTestAgent:
    def act(self, percept):
        # 只能做简单映射
        if percept == "测试失败":
            return "重新运行测试"
        elif percept == "测试通过":
            return "标记为成功"
        # ❌ 无法处理多步骤:
        # "先跑单元测试 → 再跑集成测试
        #  → 生成报告 → 通知团队"</code></pre>
        <p class="text-xs text-red-600 mt-2">问题:无法规划测试顺序,无法处理依赖关系!</p>
      </div>

      <!-- Goal-based Agent 实现 -->
      <div class="bg-green-50 p-4 rounded-lg border border-green-200">
        <h4 class="font-semibold text-green-700 mb-2">✅ Goal-based Agent(成功)</h4>
        <pre><code class="language-python text-xs">class GoalBasedTestAgent:
    def __init__(self):
        self.goal = "完成完整测试流程"

    def plan(self):
        # 目标分解 + 规划
        return [
            "步骤1: 运行单元测试",
            "步骤2: 若通过,运行集成测试",
            "步骤3: 若失败,分析日志找原因",
            "步骤4: 生成测试报告",
            "步骤5: 发送邮件通知"
        ]

    def execute(self):
        plan = self.plan()
        for step in plan:
            result = self.perform(step)
            if not result.success:
                # 动态调整计划
                self.replan(step)
        return "目标完成"</code></pre>
        <p class="text-xs text-green-600 mt-2">优势:能规划、能预测、能调整!</p>
      </div>
    </div>

    <div class="mt-4 bg-indigo-50 p-3 rounded border border-indigo-200">
      <p class="text-sm text-gray-700">
        <strong>关键对比:</strong>Reflex Agent 像"按钮机器人"(点哪儿做哪儿),Goal-based Agent 像"项目经理"(理解目标、制定计划、协调资源)。
      </p>
    </div>
  </div>

  <!-- 常见误区 -->
  <div class="bg-white rounded-lg shadow-md p-5 border-t-4 border-orange-500">
    <h3 class="text-xl font-semibold text-orange-700 mb-3 flex items-center">
      <span class="mr-2">⚠️</span>常见误区
    </h3>

    <div class="space-y-3">
      <div class="bg-orange-50 p-4 rounded-lg border-l-4 border-orange-400">
        <h4 class="font-bold text-orange-800 mb-2">误区1:混淆"反应快"和"能规划"</h4>
        <p class="text-gray-700 text-sm">
          ❌ <strong>错误认知:</strong>Reflex Agent 反应快,所以适合复杂任务。<br>
          ✅ <strong>正确理解:</strong>反应快 ≠ 有智能。复杂任务需要<strong>深思熟虑的规划</strong>,而非快速的条件反射。
        </p>
      </div>

      <div class="bg-orange-50 p-4 rounded-lg border-l-4 border-orange-400">
        <h4 class="font-bold text-orange-800 mb-2">误区2:认为Model-based就够用了</h4>
        <p class="text-gray-700 text-sm">
          ❌ <strong>错误认知:</strong>有内部模型就能处理复杂任务。<br>
          ✅ <strong>正确理解:</strong>Model-based Agent 只能"记住状态",但不会"规划未来"。就像你记得去过哪些城市,但不知道下一站该去哪。
        </p>
      </div>

      <div class="bg-orange-50 p-4 rounded-lg border-l-4 border-orange-400">
        <h4 class="font-bold text-orange-800 mb-2">误区3:忽略"多步骤"的含义</h4>
        <p class="text-gray-700 text-sm">
          ❌ <strong>错误认知:</strong>"多步骤"就是执行多次动作。<br>
          ✅ <strong>正确理解:</strong>"多步骤复杂任务"强调<strong>步骤之间有依赖关系</strong>,需要全局规划和动态调整。
        </p>
      </div>

      <div class="bg-blue-50 p-4 rounded-lg border border-blue-300 mt-4">
        <h4 class="font-bold text-blue-800 mb-2">🎓 记忆口诀</h4>
        <p class="text-gray-700 text-center text-lg font-medium">
          "简单反射看当前,模型记忆看过去,<br>
          <span class="text-blue-600">目标规划看未来</span> ← 这才是多步骤任务的关键!"
        </p>
      </div>
    </div>
  </div>

  <!-- 总结 -->
  <div class="bg-gradient-to-r from-purple-100 to-blue-100 p-5 rounded-lg mt-6 border-2 border-purple-300">
    <h3 class="text-lg font-bold text-purple-800 mb-2">🎯 核心结论</h3>
    <p class="text-gray-700 leading-relaxed">
      处理<strong>多步骤复杂任务</strong>的核心是<strong>目标导向的规划能力</strong>。Goal-based Agent 能够:
    </p>
    <ul class="list-disc list-inside text-gray-700 mt-2 space-y-1 ml-4">
      <li>将大目标分解为子任务树</li>
      <li>搜索和评估多种执行路径</li>
      <li>预测动作的长期后果</li>
      <li>动态调整计划应对变化</li>
    </ul>
    <p class="text-sm text-purple-700 mt-3 font-medium">
      💡 记住:反射型Agent像"机械开关",目标型Agent像"战略家"!
    </p>
  </div>
</div>